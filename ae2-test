-- Script: Crafting-Aufträge auf Monitor anzeigen

-- Periphere Geräte verbinden
local monitor = peripheral.wrap("right")  -- Monitor auf der rechten Seite
local storage = peripheral.wrap("back")   -- Refined Storage Controller auf der Rückseite

-- Monitor vorbereiten
monitor.clear()

-- Hilfsfunktion: Crafting-Aufträge abrufen und anzeigen
local function showCraftingTasks()
    monitor.clear()
    local tasks = storage.getCraftingTasks()  -- alle Crafting-Aufträge abrufen

    if #tasks == 0 then
        monitor.setCursorPos(1,1)
        monitor.write("Keine Crafting-Aufträge aktiv.")
        return
    end

    monitor.setCursorPos(1,1)
    monitor.write("Aktuelle Crafting-Aufträge:")
    
    for i, task in ipairs(tasks) do
        local item = task.getItem()
        local progress = math.floor(task.getProgress() * 100)  -- Fortschritt in %
        monitor.setCursorPos(1, i+1)
        monitor.write(i .. ". " .. item.label .. " | Fortschritt: " .. progress .. "%")
    end
end

-- Hauptschleife: alle 5 Sekunden aktualisieren
while true do
    showCraftingTasks()
    sleep(5)
end
